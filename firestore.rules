rules_version = '2'

service cloud.firestore {
	match /databases/{database}/documents {
		match /users/{uid} {
			allow read
			allow create: if
				isSignedInWith(uid) &&
				getNewData().cash == 1000
		}

		function isSignedIn() {
			return request.auth != null
		}

		function isSignedInWith(uid) {
			return isSignedIn() && request.auth.uid == uid
		}

		function getNewData() {
			return request.resource.data
		}
	}
}
